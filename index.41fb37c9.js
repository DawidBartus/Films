const e=document.querySelector("form"),t=document.querySelector("#film_input"),a=document.querySelector(".film_holder"),n=document.querySelector(".buttons"),r=document.querySelector(".prev"),i=document.querySelector(".next"),l=document.querySelector(".pages_number");document.querySelectorAll(".page"),document.querySelector(".film_details");let s,c,o=1,d=[];const{log:m}=console,p=e=>fetch(e).then((e=>e.json())).catch((e=>m(e))),u=()=>{c=`https://api.themoviedb.org/3/trending/all/week?api_key=cd99a2449e6daaffb205ea92bac682a0&page=${o}`,p(c).then((e=>{s=e.total_pages,b(e.results),g(o)})),r.disabled=1===o,o===s&&(i.disabled=!0)},g=e=>{if(m("im working",e),l.innerHTML="",e>=1&&e<3)for(let e=1;e<=5;e++){let t=`<button class="page" >${e}</button>`;l.innerHTML=l.innerHTML+t}else for(let t=parseInt(e)-2;t<=parseInt(e)+2;t++){let e=`<button class="page" >${t}</button>`;l.innerHTML=l.innerHTML+e}},b=e=>{m(e),d=e,e.map((async e=>{let t=e.name||e.title,n=e.poster_path,r=` <div class="film__element" data-id="${e.id}">\n  <img class="film__backdrop" src="https://image.tmdb.org/t/p/original${n}" alt="" />\n  <p class="film__name">${t}</p>\n  <p class="film__genres">${await f(e.id)}</p>\n  </div>`;a.innerHTML=a.innerHTML+r})),m("im page ele array",d)},f=async e=>{let t;return c=`https://api.themoviedb.org/3/movie/${e}?api_key=cd99a2449e6daaffb205ea92bac682a0`,await p(c).then((a=>{if(!1===a.success)return c=`https://api.themoviedb.org/3/tv/${e}?api_key=cd99a2449e6daaffb205ea92bac682a0&language=en-US`,p(c).then((e=>{t=e.genres.map((e=>e.name))}));t=a.genres.map((e=>e.name)).join(" ")})),t};u(),e.addEventListener("submit",(e=>{e.preventDefault();const a=t.value.replaceAll(" ","%20");a?(c=`\n    https://api.themoviedb.org/3/search/multi?api_key=cd99a2449e6daaffb205ea92bac682a0&query=${a}`,p(c).then((e=>{m(e.results[0])}))):m("sorry")})),n.addEventListener("click",(e=>{m(e.target),e.target===r?(o-=1,a.innerHTML="",u()):e.target===i?(o=parseInt(o)+1,a.innerHTML="",u()):(o=e.target.innerHTML,a.innerHTML="",u())})),a.addEventListener("click",(e=>{m(e.target.parentElement.dataset.id)}));
//# sourceMappingURL=index.41fb37c9.js.map

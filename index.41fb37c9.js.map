{"mappings":"AAAA,MAAMA,EAAOC,SAASC,cAAc,QAC9BC,EAAQF,SAASC,cAAc,eAE/BE,EAAaH,SAASC,cAAc,gBACpCG,EAAUJ,SAASC,cAAc,YACjCI,EAAWL,SAASC,cAAc,SAClCK,EAAWN,SAASC,cAAc,SAClCM,EAAaP,SAASC,cAAc,iBACzBD,SAASQ,iBAAiB,SACvBR,SAASC,cAAc,iBAE3C,IACIQ,EAEAC,EAHAC,EAAO,EAEPC,EAAY,GAGhB,MAAMC,IAAEC,GAAQC,QA4BVC,EAAYC,GACTC,MAAMD,GACVE,MAAKC,GACGA,EAAIC,SAEZC,OAAMC,GAAST,EAAIS,KAGlBC,EAAW,KACfd,EAAO,gGAAsEC,IAC7EK,EAAUN,GAAMS,MAAKC,IACnBX,EAAQW,EAAIK,YAEZC,EAAWN,EAAIO,SACfC,EAAajB,EAAK,IAGlBN,EAASwB,SADE,IAATlB,EAKAA,IAASF,IACXH,EAASuB,UAAW,EAAI,EAqBtBD,EAAeE,IAGnB,GAFAhB,EAAI,aAAcgB,GAClBvB,EAAWwB,UAAY,GACnBD,GAAQ,GAAKA,EAAO,EACtB,IAAK,IAAIE,EAAI,EAAGA,GAAK,EAAGA,IAAK,CAC3B,IAAIC,EAAO,yBAAyBD,aACpCzB,EAAWwB,UAAYxB,EAAWwB,UAAYE,C,MAGhD,IAAK,IAAIC,EAAIC,SAASL,GAAQ,EAAGI,GAAKC,SAASL,GAAQ,EAAGI,IAAK,CAC7D,IAAID,EAAO,yBAAyBC,aAEpC3B,EAAWwB,UAAYxB,EAAWwB,UAAYE,C,GAK9CP,EAAaU,IACjBtB,EAAIsB,GACJxB,EAAYwB,EACZA,EAAIC,KAAIC,MAAMC,IACZ,IAAIC,EAAOD,EAAKC,MAAQD,EAAKE,MACzBC,EAASH,EAAKI,YAIdC,EAAc,wCAHTL,EAAKM,+EAIsDH,yCAC9CF,0CAJHM,EAAUP,EAAKM,oBAQlC1C,EAAW4B,UAAY5B,EAAW4B,UAAYa,CAAW,IAE3D9B,EAAI,oBAAqBF,EAAU,EAG/BkC,EAAYR,MAAMO,IAEtB,IAAIE,EAYJ,OAbArC,EAAO,sCAAsCmC,mDAEvC7B,EAAUN,GAAMS,MAAK6B,IACzB,IAAoB,IAAhBA,EAAIC,QAEN,OADAvC,EAAO,mCAAmCmC,4DACnC7B,EAAUN,GAAMS,MAAKC,IAC1B2B,EAAM3B,EAAI8B,OAAOb,KAAID,GAAOA,EAAII,MAAK,IAIvCO,EAAMC,EAAIE,OAAOb,KAAID,GAAOA,EAAII,OAAMW,KAAK,IAAI,IAG5CJ,CAAG,EA+BZvB,IACAzB,EAAKqD,iBAAiB,UAxJRC,IACZA,EAAEC,iBACF,MAAMf,EAAOrC,EAAMqD,MAAMC,WAAW,IAAK,OAErCjB,GACF7B,EAAO,kGAC0D6B,IAEjEvB,EAAUN,GAAMS,MAAKC,IACnBN,EAAIM,EAAIO,QAAQ,GAAG,KAGrBb,EAAI,QAAQ,IA6IhBV,EAAQgD,iBAAiB,SArGNC,IACjBvC,EAAIuC,EAAEI,QAEFJ,EAAEI,SAAWpD,GACfM,GAAQ,EACRR,EAAW4B,UAAY,GACvBP,KACS6B,EAAEI,SAAWnD,GACtBK,EAAOwB,SAASxB,GAAQ,EACxBR,EAAW4B,UAAY,GACvBP,MAEAb,EAAO0C,EAAEI,OAAO1B,UAChB5B,EAAW4B,UAAY,GACvBP,I,IAwFJrB,EAAWiD,iBAAiB,SA/BZC,IACdvC,EAAIuC,EAAEI,OAAOC,cAAcC,QAAQd,GAwB5B","sources":["src/index.js"],"sourcesContent":["const form = document.querySelector('form');\nconst input = document.querySelector('#film_input');\nconst key = 'cd99a2449e6daaffb205ea92bac682a0';\nconst filmHolder = document.querySelector('.film_holder');\nconst buttons = document.querySelector('.buttons');\nconst prevBttn = document.querySelector('.prev');\nconst nextBttn = document.querySelector('.next');\nconst bttnHolder = document.querySelector('.pages_number');\nconst pageBttn = document.querySelectorAll('.page');\nconst filmDetails = document.querySelector('.film_details');\n\nlet page = 1;\nlet pages;\nlet pageArray = [];\nlet link;\n\nconst { log } = console;\n\nconst films = e => {\n  e.preventDefault();\n  const film = input.value.replaceAll(' ', '%20');\n\n  if (film) {\n    link = `\n    https://api.themoviedb.org/3/search/multi?api_key=${key}&query=${film}`;\n\n    fetchFilm(link).then(res => {\n      log(res.results[0]);\n    });\n  } else {\n    log('sorry');\n  }\n};\n\n// const fetchFilm = link => {\n//   return fetch(link).then(res => {\n//     if (!res.ok) {\n//       throw new Error(res.status);\n//     } else {\n//       return res.json();\n//     }\n//   });\n// };\n\nconst fetchFilm = link => {\n  return fetch(link)\n    .then(res => {\n      return res.json();\n    })\n    .catch(error => log(error));\n};\n\nconst tranding = () => {\n  link = `https://api.themoviedb.org/3/trending/all/week?api_key=${key}&page=${page}`;\n  fetchFilm(link).then(res => {\n    pages = res.total_pages;\n\n    DOMElement(res.results);\n    generateBttn(page);\n  });\n  if (page === 1) {\n    prevBttn.disabled = true;\n  } else {\n    prevBttn.disabled = false;\n  }\n  if (page === pages) {\n    nextBttn.disabled = true;\n  }\n};\n\nconst changePage = e => {\n  log(e.target);\n\n  if (e.target === prevBttn) {\n    page -= 1;\n    filmHolder.innerHTML = '';\n    tranding();\n  } else if (e.target === nextBttn) {\n    page = parseInt(page) + 1;\n    filmHolder.innerHTML = '';\n    tranding();\n  } else {\n    page = e.target.innerHTML;\n    filmHolder.innerHTML = '';\n    tranding();\n  }\n};\nconst generateBttn = page => {\n  log('im working', page);\n  bttnHolder.innerHTML = '';\n  if (page >= 1 && page < 3) {\n    for (let i = 1; i <= 5; i++) {\n      let bttn = `<button class=\"page\" >${i}</button>`;\n      bttnHolder.innerHTML = bttnHolder.innerHTML + bttn;\n    }\n  } else {\n    for (let i = parseInt(page) - 2; i <= parseInt(page) + 2; i++) {\n      let bttn = `<button class=\"page\" >${i}</button>`;\n\n      bttnHolder.innerHTML = bttnHolder.innerHTML + bttn;\n    }\n  }\n};\n\nconst DOMElement = ele => {\n  log(ele);\n  pageArray = ele;\n  ele.map(async film => {\n    let name = film.name || film.title;\n    let poster = film.poster_path;\n    let id = film.id;\n    let genres = await getGenres(film.id);\n\n    let HTMLelement = ` <div class=\"film__element\" data-id=\"${id}\">\n  <img class=\"film__backdrop\" src=\"https://image.tmdb.org/t/p/original${poster}\" alt=\"\" />\n  <p class=\"film__name\">${name}</p>\n  <p class=\"film__genres\">${genres}</p>\n  </div>`;\n\n    filmHolder.innerHTML = filmHolder.innerHTML + HTMLelement;\n  });\n  log('im page ele array', pageArray);\n};\n\nconst getGenres = async id => {\n  link = `https://api.themoviedb.org/3/movie/${id}?api_key=cd99a2449e6daaffb205ea92bac682a0`;\n  let gen;\n  await fetchFilm(link).then(res => {\n    if (res.success === false) {\n      link = `https://api.themoviedb.org/3/tv/${id}?api_key=cd99a2449e6daaffb205ea92bac682a0&language=en-US`;\n      return fetchFilm(link).then(res => {\n        gen = res.genres.map(ele => ele.name);\n        // return gen;\n      });\n    } else {\n      gen = res.genres.map(ele => ele.name).join(' ');\n    }\n  });\n  return gen;\n};\n\nconst details = e => {\n  log(e.target.parentElement.dataset.id);\n\n  let takToMaWygladac = `<img src=\"\" alt=\"\" srcset=\"\" />\n  <div>\n    <ul>\n      <li>\n        <p></p>\n        <p></p>\n      </li>\n      <li>\n        <p></p>\n        <p></p>\n      </li>\n      <li>\n        <p></p>\n        <p></p>\n      </li>\n      <li>\n        <p></p>\n        <p></p>\n      </li>\n    </ul>\n    <h4></h4>\n    <p></p>\n  </div>`;\n};\n\ntranding();\nform.addEventListener('submit', films);\nbuttons.addEventListener('click', changePage);\nfilmHolder.addEventListener('click', details);\n// await fetchFilm(link).then(res => {\n//     log(res);\n//     if (res.genres) {\n//       gen = res.genres.map(ele => ele.name).join(' ');\n//       } else {\n//         let link = `https://api.themoviedb.org/3/tv/${id}?api_key=cd99a2449e6daaffb205ea92bac682a0&language=en-US`;\n//         fetchFilm(link).then(res => {\n//           log(res);\n//           gen = res.genres.map(ele => ele.name).join(' ');\n//           log(gen);\n//         });\n//     }\n//   });\n"],"names":["$1f0dc3b9307be026$var$form","document","querySelector","$1f0dc3b9307be026$var$input","$1f0dc3b9307be026$var$filmHolder","$1f0dc3b9307be026$var$buttons","$1f0dc3b9307be026$var$prevBttn","$1f0dc3b9307be026$var$nextBttn","$1f0dc3b9307be026$var$bttnHolder","querySelectorAll","$1f0dc3b9307be026$var$pages","$1f0dc3b9307be026$var$link","$1f0dc3b9307be026$var$page","$1f0dc3b9307be026$var$pageArray","log","$1f0dc3b9307be026$var$log","console","$1f0dc3b9307be026$var$fetchFilm","link1","fetch","then","res","json","catch","error","$1f0dc3b9307be026$var$tranding","total_pages","$1f0dc3b9307be026$var$DOMElement","results","$1f0dc3b9307be026$var$generateBttn","disabled","page1","innerHTML","i","bttn","i1","parseInt","ele","map","async","film","name","title","poster","poster_path","HTMLelement","id","$1f0dc3b9307be026$var$getGenres","gen","res1","success","genres","join","addEventListener","e","preventDefault","value","replaceAll","target","parentElement","dataset"],"version":3,"file":"index.41fb37c9.js.map"}